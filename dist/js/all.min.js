$(()=>{$(".select-cards-sorting").selectmenu()}),$(function(){let o=$("header .menu-container .search-box .search-btn"),r=$("header .navbar"),i=$("header .wrapper .navbar form .search-btn");$("header .wrapper .navbar form .search");let n=$("header .wrapper .logo-container .burger-menu .menu-trigger");var e=$(".logo-container .burger-menu"),t=$("header .wrapper .navbar form[name='search']");let a=".navbar.active",l="active",s,c,d,g=!1,u,p=[{left:"0px",top:"0px",opacity:1,offset:0},{opacity:.3,visibility:"visible",offset:.9},{left:"",top:"",opacity:0,visibility:"hidden",offset:1}],f={duration:400,easing:"ease-out",fill:"forwards"};function m(){var e,t;r.toggleClass(l),n.toggleClass(l),i&&$(window).width()<=650&&(g||(s=s||C(i),e=C(o),t=(()=>{var e=Number(r.css("width").slice(0,-2)),t=Number(r.css("padding").slice(0,-2)),o=Number(i.css("right").slice(0,-2)),n=Number(i.css("width").slice(0,-2));return e-t-o-n})(),e=c=((e,t,o)=>({left:t.left-o,top:e.top-t.top}))(s,e,t),p[2].left=-1*e.left+"px",p[2].top=e.top+"px",(d=(()=>(d&&b(),o[0].animate(p,f)))()).pause(),g=!0),r.hasClass(l)&&(d.playbackRate=1,d.play(),stateOfSearchBtn=!0),r.hasClass(l)||y())}function h(){$(a)[0]&&(w(),b())}function C(e){e=e[0].getBoundingClientRect();return{left:e.left,top:e.top}}function w(){r.removeClass(l),n.removeClass(l)}function v(){console.log("Search is progress.....")}function b(){d.cancel(),g=!1}function y(){d.reverse(),g=!1}e.on("click",m),$(window).on("resize",function(){clearTimeout(u),u=setTimeout(h,500)}),$(document).on("click",function(e){!$(this).has(a).length||$(e.target).closest(a)[0]||$(e.target).closest(".burger-menu")[0]||$(e.target).closest("header .menu-container .search-box .search-btn")[0]||(w(),$(window).width()<=650&&y())}),o.on("click",function(e){$(window).width()<=540&&!$(this).closest(a)[0]&&m();$(this).closest(a)[0]&&v()}),t.on("submit",function(e){e.preventDefault(),v()}),$(".navbar .menu .nested-drop-down > .menu-item").on("click",function(){$(this).closest(".nested-drop-down").toggleClass(l),$(this).next(".drop-down").toggleClass(l)}),$(".nested-drop-down .nested-drop-down-second .menu-item").on("click",function(){$(this).closest(".nested-drop-down-second").toggleClass(l),$(this).next(".drop-down").toggleClass(l)})}),$(document).ready(function(){let e=$("main .additional-offers > .wrapper.owl-carousel"),t=$(".blog-posts > .wrapper > .article-container.owl-carousel"),o;function n(){$(window).width()<=655?e.hasClass("owl-loaded")||e.owlCarousel({autoplay:!1,autoplayTimeout:6500,autoplaySpeed:1e3,loop:!0,navText:!1,nav:!0,items:1,center:!0,autoHeight:!0}):e.hasClass("owl-loaded")&&e.trigger("destroy.owl.carousel")}n(),t.owlCarousel({autoplay:!1,autoplayTimeout:6500,autoplaySpeed:1e3,loop:!0,navText:!1,margin:24,nav:!0,responsive:{0:{items:1},611:{items:2},911:{items:3},1201:{items:4}}}),$(window).on("resize",function(){clearTimeout(o),o=setTimeout(n,500)})});let $preloaderContainer=$(".preload-container"),$statusLoading=$(".status-loading"),$body=$("body"),paddingBodyRight,differ,imgCount=$("img").length,percent=Number((100/imgCount).toFixed()),loadedCount=0,result=0;function init(){lookScroll();for(let e=0;e<imgCount;e++){var t=new Image;t.src=document.images[e].src,$(t).on("load",onCopyImgLoad),$(t).on("error",onCopyImgLoad)}}function onCopyImgLoad(){result+=percent,loadedCount++,(100<=result||loadedCount==imgCount?($preloaderContainer.addClass("hide"),unLookScroll):fillProgress)()}function fillProgress(){$statusLoading.text(result+" %")}function lookScroll(){function e(){document.body.style.paddingRight=String(paddingBodyRight+differ)+"px",paddingBodyRight+=differ}(differ=window.innerWidth-document.documentElement.clientWidth)&&(paddingBodyRight=paddingBodyRight||Number($body.css("paddingRight").slice(0,2)),e()),$body.css("overflow","hidden")}function unLookScroll(){differ&&(document.body.style.paddingRight=String(paddingBodyRight-differ)+"px",paddingBodyRight-=differ),$body.css("overflow","")}function removePreloader(){$preloaderContainer&&$preloaderContainer.remove()}init(),$(()=>{let t=$("main .catalog .wrapper .left-side .price-container .categories-list .progress-container .progress-bar .marker.min-price"),r=$("main .catalog .wrapper .left-side .price-container .categories-list .progress-container .progress-bar .marker.max-price"),i=$("main .catalog .wrapper .left-side .price-container .categories-list .progress-container .progress-bar .range"),o=$("main .catalog .wrapper .left-side .price-container .categories-list .price .price-content");var e=$("main .catalog .wrapper .left-side .price-container .categories-list .btn");let a=39,l=1230;let n={minCosts:null,maxCosts:null};function s(){Number(t.val())!==a&&(a=Number(t.val())),Number(r.val())!==l&&(l=Number(r.val())),a>l&&([a,l]=[l,a],t.val(a),r.val(l));var e=d(a,l);u(),g(),c(e)}function c(e){o.text(e)}function d(e,t){return`$${e} - $`+t}function g(){t.val(a),r.val(l)}function u(){var e=Number(r.attr("max")),t=Number(r.attr("min")),o=(a-t)/(e-t)*100,n=o+"%",e=(l-t)/(e-t)*100-o+"%";i.css("left",n).css("width",e)}t.on("input",s),r.on("input",s),e.on("click",function(){n.minCosts=a,n.maxCosts=l,console.log("Filtering.....",n)}),e=d(a,l),u(),g(),c(e)});let $filterBtn=$(".catalog .right-side .filter-btn"),$leftSide=$(".catalog .left-side"),$logInBtn=$("header .wrapper .menu-container .log-in-btn, header .wrapper .navbar .log-in-btn"),$closeRegisterPage=$("header .register-page .wrapper-register .close-page"),$registerPage=$("header .register-page"),$overlay=$("header .overlay"),ACTIVE_CLASS="active";function onFilterBtnClick(){$leftSide.toggleClass(ACTIVE_CLASS)}function onLogInBtnClick(){$overlay.addClass(ACTIVE_CLASS),$registerPage.addClass(ACTIVE_CLASS)}function onOverlayClick(){$overlay.removeClass(ACTIVE_CLASS),$registerPage.removeClass(ACTIVE_CLASS)}$filterBtn.on("click",onFilterBtnClick),$logInBtn.on("click",onLogInBtnClick),$overlay.on("click",onOverlayClick),$closeRegisterPage.on("click",onOverlayClick);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmRzLXNvcnRpbmcuanMiLCJtb2JpbGUtbWVudS5qcyIsIm93bC1jYXJ1c2VsLmpzIiwicHJlbG9hZGVyLmpzIiwicHJpY2UtcmFuZ2UuanMiLCJzY3JpcHRzLmpzIl0sIm5hbWVzIjpbIiQiLCJzZWxlY3RtZW51IiwiJHNlYXJjaEJ0bk1lbnUiLCIkbmF2QmFyIiwiJHNlYXJjaEJ0bk5hdkJhciIsIiRtZW51VHJpZ2dlciIsIiRidXJnZXJNZW51IiwiJHNlYXJjaEZvcm0iLCJOQVZCQVJfQUNUSVZFX1NFTEVDVE9SIiwiQUNUSVZFX0NMQVNTIiwiYnRuTmF2QmFyQ29vcmRzIiwiZGlmZiIsInNlYXJjaEJ0bkFuaW1hdGlvbiIsImlzQWNjb21wbGlzaEFuaW1hdGlvbiIsInRpbWVvdXQiLCJrZXlGcmFtZSIsImxlZnQiLCJ0b3AiLCJvcGFjaXR5Iiwib2Zmc2V0IiwidmlzaWJpbGl0eSIsImFuaW1hdGVPcHRpb25zIiwiZHVyYXRpb24iLCJlYXNpbmciLCJmaWxsIiwib25CdXJnZXJNZW51Q2xpY2siLCJidG5NZW51Q29vcmRzIiwibmF2QmFyU2hpZnQiLCJ0b2dnbGVDbGFzcyIsIndpbmRvdyIsIndpZHRoIiwiY2FsY0Nvb3JkcyIsIm5hdkJhcldpZHRoIiwiTnVtYmVyIiwiY3NzIiwic2xpY2UiLCJuYXZCYXJQYWRkaW5nIiwiYnRuUmlnaHQiLCJidG5XaWR0aCIsImNhbmNlbEFuaW1hdGUiLCJhbmltYXRlIiwicGF1c2UiLCJoYXNDbGFzcyIsInBsYXliYWNrUmF0ZSIsInBsYXkiLCJzdGF0ZU9mU2VhcmNoQnRuIiwicmV2ZXJzZUFuaW1hdGUiLCJpbml0QW5pbWF0aW9uQWZ0ZXJSZXNpemUiLCJoaWRlTWVudSIsImVsIiwiY29vcmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVtb3ZlQ2xhc3MiLCJkb1NlYXJjaCIsImNvbnNvbGUiLCJsb2ciLCJjYW5jZWwiLCJyZXZlcnNlIiwib24iLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZG9jdW1lbnQiLCJlIiwidGhpcyIsImhhcyIsImxlbmd0aCIsInRhcmdldCIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsIm5leHQiLCJyZWFkeSIsIiRhZGRpdGlvbmFsT2ZmZXJzQ2Fyb3VzZWwiLCIkYXJ0aWNsZUNvbnRhaW5lciIsInRvZ2dsZUFkZGl0aW9uYWxPZmZlcnMiLCJvd2xDYXJvdXNlbCIsImF1dG9wbGF5IiwiYXV0b3BsYXlUaW1lb3V0IiwiYXV0b3BsYXlTcGVlZCIsImxvb3AiLCJuYXZUZXh0IiwibmF2IiwiaXRlbXMiLCJjZW50ZXIiLCJhdXRvSGVpZ2h0IiwidHJpZ2dlciIsIm1hcmdpbiIsInJlc3BvbnNpdmUiLCIwIiwiNjExIiwiOTExIiwiMTIwMSIsIiRwcmVsb2FkZXJDb250YWluZXIiLCIkc3RhdHVzTG9hZGluZyIsIiRib2R5IiwicGFkZGluZ0JvZHlSaWdodCIsImRpZmZlciIsImltZ0NvdW50IiwicGVyY2VudCIsInRvRml4ZWQiLCJsb2FkZWRDb3VudCIsInJlc3VsdCIsImluaXQiLCJsb29rU2Nyb2xsIiwibGV0IiwiaSIsImNvcHlfaW1nIiwiSW1hZ2UiLCJzcmMiLCJpbWFnZXMiLCJvbkNvcHlJbWdMb2FkIiwiYWRkQ2xhc3MiLCJ1bkxvb2tTY3JvbGwiLCJmaWxsUHJvZ3Jlc3MiLCJ0ZXh0IiwiYWRkUGFkZGluZ1JpZ2h0T2ZCb2R5IiwiYm9keSIsInN0eWxlIiwicGFkZGluZ1JpZ2h0IiwiU3RyaW5nIiwiaW5uZXJXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwicmVtb3ZlUHJlbG9hZGVyIiwicmVtb3ZlIiwiJG1hcmtlck1pblByaWNlIiwiJG1hcmtlck1heFByaWNlIiwiJHJhbmdlUHJpY2UiLCIkcHJpY2VDb250ZW50IiwiJGZpbHRlckJ0biIsIm1pbiIsIm1heCIsInJhbmdlIiwibWluQ29zdHMiLCJtYXhDb3N0cyIsIm9uTWFya2VyUHJpY2VJbnB1dCIsInZhbCIsImNvbnRlbnQiLCJjcmFmdENvbnRlbnQiLCJzZXRSYW5nZSIsInNldFRodW1icyIsImZpbGxQcmljZSIsIm1heEF0dHIiLCJhdHRyIiwibWluQXR0ciIsIm1pblBlcmNlbnQiLCIkbGVmdFNpZGUiLCIkbG9nSW5CdG4iLCIkY2xvc2VSZWdpc3RlclBhZ2UiLCIkcmVnaXN0ZXJQYWdlIiwiJG92ZXJsYXkiLCJvbkZpbHRlckJ0bkNsaWNrIiwib25Mb2dJbkJ0bkNsaWNrIiwib25PdmVybGF5Q2xpY2siXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFBLEtBQ0FBLEVBQUEsdUJBQUEsRUFBQUMsV0FBQSxDQUNBLENBQUEsRUNGQUQsRUFBQSxXQUNBLElBQUFFLEVBQUFGLEVBQUEsZ0RBQUEsRUFDQUcsRUFBQUgsRUFBQSxnQkFBQSxFQUNBSSxFQUFBSixFQUFBLDBDQUFBLEVBQ0FBLEVBQUEsc0NBQUEsRUFDQSxJQUFBSyxFQUFBTCxFQUFBLDREQUFBLEVBQ0EsSUFBQU0sRUFBQU4sRUFBQSw4QkFBQSxFQUNBTyxFQUFBUCxFQUFBLDZDQUFBLEVBQ0EsSUFBQVEsRUFBQSxpQkFHQUMsRUFBQSxTQUdBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUFBLENBQUEsRUFDQUMsRUFFQUMsRUFBQSxDQUNBLENBQUFDLEtBQUEsTUFBQUMsSUFBQSxNQUFBQyxRQUFBLEVBQUFDLE9BQUEsQ0FBQSxFQUNBLENBQUFELFFBQUEsR0FBQUUsV0FBQSxVQUFBRCxPQUFBLEVBQUEsRUFDQSxDQUFBSCxLQUFBLEdBQUFDLElBQUEsR0FBQUMsUUFBQSxFQUFBRSxXQUFBLFNBQUFELE9BQUEsQ0FBQSxHQUVBRSxFQUFBLENBQ0FDLFNBQUEsSUFDQUMsT0FBQSxXQUNBQyxLQUFBLFVBQ0EsRUFrQkEsU0FBQUMsSUFHQSxJQWlFQUMsRUFDQUMsRUEyQ0F4QixFQUFBeUIsWUFBQW5CLENBQUEsRUFDQUosRUFBQXVCLFlBQUFuQixDQUFBLEVBOUdBTCxHQUFBSixFQUFBNkIsTUFBQSxFQUFBQyxNQUFBLEdBdENBLE1BdUNBakIsSUE0REFILEVBQUFBLEdBQ0FxQixFQUFBM0IsQ0FBQSxFQUdBc0IsRUFB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QSxDQUVBLFNBQUErSSxpQkFDQUgsU0FBQWpHLFlBQUEzQyxZQUFBLEVBQ0EySSxjQUFBaEcsWUFBQTNDLFlBQUEsQ0FDQSxDQWpCQXVILFdBQUF0RSxHQUFBLFFBQUE0RixnQkFBQSxFQUNBSixVQUFBeEYsR0FBQSxRQUFBNkYsZUFBQSxFQUNBRixTQUFBM0YsR0FBQSxRQUFBOEYsY0FBQSxFQUNBTCxtQkFBQXpGLEdBQUEsUUFBQThGLGNBQUEiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICAkKCcuc2VsZWN0LWNhcmRzLXNvcnRpbmcnKS5zZWxlY3RtZW51KCk7XG59KTtcbiIsIiQoZnVuY3Rpb24gKCkge1xuICBjb25zdCAkc2VhcmNoQnRuTWVudSA9ICQoJ2hlYWRlciAubWVudS1jb250YWluZXIgLnNlYXJjaC1ib3ggLnNlYXJjaC1idG4nKTtcbiAgY29uc3QgJG5hdkJhciA9ICQoJ2hlYWRlciAubmF2YmFyJyk7XG4gIGNvbnN0ICRzZWFyY2hCdG5OYXZCYXIgPSAkKCdoZWFkZXIgLndyYXBwZXIgLm5hdmJhciBmb3JtIC5zZWFyY2gtYnRuJyk7XG4gIGNvbnN0ICRzZWFyY2hJbnB1dE5hdkJhciA9ICQoJ2hlYWRlciAud3JhcHBlciAubmF2YmFyIGZvcm0gLnNlYXJjaCcpO1xuICBjb25zdCAkbWVudVRyaWdnZXIgPSAkKCdoZWFkZXIgLndyYXBwZXIgLmxvZ28tY29udGFpbmVyIC5idXJnZXItbWVudSAubWVudS10cmlnZ2VyJyk7XG4gIGNvbnN0ICRidXJnZXJNZW51ID0gJCgnLmxvZ28tY29udGFpbmVyIC5idXJnZXItbWVudScpO1xuICBjb25zdCAkc2VhcmNoRm9ybSA9ICQoXCJoZWFkZXIgLndyYXBwZXIgLm5hdmJhciBmb3JtW25hbWU9J3NlYXJjaCddXCIpO1xuICBjb25zdCBOQVZCQVJfQUNUSVZFX1NFTEVDVE9SID0gJy5uYXZiYXIuYWN0aXZlJztcbiAgY29uc3QgQlVSR0VSX01FTlVfU0VMRUNUT1IgPSAnLmJ1cmdlci1tZW51JztcbiAgY29uc3QgU0VBUkNIX0JUTl9NRU5VX1NFTEVDVE9SID0gJ2hlYWRlciAubWVudS1jb250YWluZXIgLnNlYXJjaC1ib3ggLnNlYXJjaC1idG4nO1xuICBjb25zdCBBQ1RJVkVfQ0xBU1MgPSAnYWN0aXZlJztcbiAgY29uc3QgTUFYX1dJRFRIX0ZPUl9NT1ZJTkdfU0VBUkNIID0gNjUwO1xuICBjb25zdCBNQVhfV0lEVEhfRk9SX09QRU5fU0VBUkNIX0JBUiA9IDU0MDtcbiAgbGV0IGJ0bk5hdkJhckNvb3JkcztcbiAgbGV0IGRpZmY7XG4gIGxldCBzZWFyY2hCdG5BbmltYXRpb247XG4gIGxldCBpc0FjY29tcGxpc2hBbmltYXRpb24gPSBmYWxzZTtcbiAgbGV0IHRpbWVvdXQ7XG4gIGNvbnN0IERFTEFZX1JFQ0FMQ19SRVNJWkUgPSA1MDA7XG4gIGNvbnN0IGtleUZyYW1lID0gW1xuICAgIHsgbGVmdDogJzBweCcsIHRvcDogJzBweCcsIG9wYWNpdHk6IDEsIG9mZnNldDogMCB9LFxuICAgIHsgb3BhY2l0eTogMC4zLCB2aXNpYmlsaXR5OiAndmlzaWJsZScsIG9mZnNldDogMC45IH0sXG4gICAgeyBsZWZ0OiAnJywgdG9wOiAnJywgb3BhY2l0eTogMCwgdmlzaWJpbGl0eTogJ2hpZGRlbicsIG9mZnNldDogMSB9LFxuICBdO1xuICBjb25zdCBhbmltYXRlT3B0aW9ucyA9IHtcbiAgICBkdXJhdGlvbjogNDAwLFxuICAgIGVhc2luZzogJ2Vhc2Utb3V0JyxcbiAgICBmaWxsOiAnZm9yd2FyZHMnLFxuICB9O1xuXG4gICRidXJnZXJNZW51Lm9uKCdjbGljaycsIG9uQnVyZ2VyTWVudUNsaWNrKTtcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIG9uRG9jdW1lbnRDbGljayk7XG4gICRzZWFyY2hCdG5NZW51Lm9uKCdjbGljaycsIG9uU2VhcmNoQnRuTWVudUNsaWNrKTtcbiAgJHNlYXJjaEZvcm0ub24oJ3N1Ym1pdCcsIG9uU2VhcmNoRm9ybVN1Ym1pdCk7XG5cbiAgJCgnLm5hdmJhciAubWVudSAubmVzdGVkLWRyb3AtZG93biA+IC5tZW51LWl0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubmVzdGVkLWRyb3AtZG93bicpLnRvZ2dsZUNsYXNzKEFDVElWRV9DTEFTUyk7XG4gICAgJCh0aGlzKS5uZXh0KCcuZHJvcC1kb3duJykudG9nZ2xlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbiAgfSk7XG5cbiAgJCgnLm5lc3RlZC1kcm9wLWRvd24gLm5lc3RlZC1kcm9wLWRvd24tc2Vjb25kIC5tZW51LWl0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubmVzdGVkLWRyb3AtZG93bi1zZWNvbmQnKS50b2dnbGVDbGFzcyhBQ1RJVkVfQ0xBU1MpO1xuICAgICQodGhpcykubmV4dCgnLmRyb3AtZG93bicpLnRvZ2dsZUNsYXNzKEFDVElWRV9DTEFTUyk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9uQnVyZ2VyTWVudUNsaWNrKCkge1xuICAgIHRvZ2dsZU1lbnUoKTtcblxuICAgIGlmICgkc2VhcmNoQnRuTmF2QmFyICYmICQod2luZG93KS53aWR0aCgpIDw9IE1BWF9XSURUSF9GT1JfTU9WSU5HX1NFQVJDSCkge1xuICAgICAgaWYgKCFpc0FjY29tcGxpc2hBbmltYXRpb24pIHtcbiAgICAgICAgaW5pdEFuaW1hdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJG5hdkJhci5oYXNDbGFzcyhBQ1RJVkVfQ0xBU1MpKSB7XG4gICAgICAgIHBsYXlBbmltYXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoISRuYXZCYXIuaGFzQ2xhc3MoQUNUSVZFX0NMQVNTKSkge1xuICAgICAgICByZXZlcnNlQW5pbWF0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGluaXRBbmltYXRpb25BZnRlclJlc2l6ZSwgREVMQVlfUkVDQUxDX1JFU0laRSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0QW5pbWF0aW9uQWZ0ZXJSZXNpemUoKSB7XG4gICAgaWYgKCQoTkFWQkFSX0FDVElWRV9TRUxFQ1RPUilbMF0pIHtcbiAgICAgIGhpZGVNZW51KCk7XG4gICAgICBjYW5jZWxBbmltYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25Eb2N1bWVudENsaWNrKGUpIHtcbiAgICBpZiAoXG4gICAgICAkKHRoaXMpLmhhcyhOQVZCQVJfQUNUSVZFX1NFTEVDVE9SKS5sZW5ndGggJiZcbiAgICAgICEkKGUudGFyZ2V0KS5jbG9zZXN0KE5BVkJBUl9BQ1RJVkVfU0VMRUNUT1IpWzBdICYmXG4gICAgICAhJChlLnRhcmdldCkuY2xvc2VzdChCVVJHRVJfTUVOVV9TRUxFQ1RPUilbMF0gJiZcbiAgICAgICEkKGUudGFyZ2V0KS5jbG9zZXN0KFNFQVJDSF9CVE5fTUVOVV9TRUxFQ1RPUilbMF1cbiAgICApIHtcbiAgICAgIGhpZGVNZW51KCk7XG5cbiAgICAgIGlmICgkKHdpbmRvdykud2lkdGgoKSA8PSBNQVhfV0lEVEhfRk9SX01PVklOR19TRUFSQ0gpIHtcbiAgICAgICAgcmV2ZXJzZUFuaW1hdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNlYXJjaEJ0bk1lbnVDbGljayhlKSB7XG4gICAgaWYgKFxuICAgICAgJCh3aW5kb3cpLndpZHRoKCkgPD0gTUFYX1dJRFRIX0ZPUl9PUEVOX1NFQVJDSF9CQVIgJiZcbiAgICAgICEkKHRoaXMpLmNsb3Nlc3QoTkFWQkFSX0FDVElWRV9TRUxFQ1RPUilbMF1cbiAgICApIHtcbiAgICAgIG9uQnVyZ2VyTWVudUNsaWNrKCk7XG4gICAgfVxuICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoTkFWQkFSX0FDVElWRV9TRUxFQ1RPUilbMF0pIHtcbiAgICAgIGRvU2VhcmNoKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25TZWFyY2hGb3JtU3VibWl0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBkb1NlYXJjaCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW5pdEFuaW1hdGlvbigpIHtcbiAgICBpZiAoIWJ0bk5hdkJhckNvb3Jkcykge1xuICAgICAgYnRuTmF2QmFyQ29vcmRzID0gY2FsY0Nvb3Jkcygkc2VhcmNoQnRuTmF2QmFyKTtcbiAgICB9XG5cbiAgICBjb25zdCBidG5NZW51Q29vcmRzID0gY2FsY0Nvb3Jkcygkc2VhcmNoQnRuTWVudSk7XG4gICAgY29uc3QgbmF2QmFyU2hpZnQgPSBjYWxjTmF2QmFyU2hpZnQoKTtcblxuICAgIGRpZmYgPSBjb3VudE9mZnNldEJ0bihidG5OYXZCYXJDb29yZHMsIGJ0bk1lbnVDb29yZHMsIG5hdkJhclNoaWZ0KTtcblxuICAgIGZpbGxLZXlGcmFtZShkaWZmKTtcbiAgICBzZWFyY2hCdG5BbmltYXRpb24gPSBjcmVhdGVBbmltYXRpb24oKTtcbiAgICBwYXVzZUFuaW1hdGUoKTtcbiAgfVxuICBmdW5jdGlvbiBjYWxjQ29vcmRzKGVsKSB7XG4gICAgY29uc3QgY29vcmRzID0gZWxbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4geyBsZWZ0OiBjb29yZHMubGVmdCwgdG9wOiBjb29yZHMudG9wIH07XG4gIH1cblxuICBmdW5jdGlvbiBjb3VudE9mZnNldEJ0bihidG5OYXZCYXJDb29yZHMsIGJ0bk1lbnVDb29yZHMsIG5hdkJhclNoaWZ0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZnQ6IGJ0bk1lbnVDb29yZHMubGVmdCAtIG5hdkJhclNoaWZ0LFxuICAgICAgdG9wOiBidG5OYXZCYXJDb29yZHMudG9wIC0gYnRuTWVudUNvb3Jkcy50b3AsXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGxLZXlGcmFtZShkaWZmKSB7XG4gICAga2V5RnJhbWVbMl0ubGVmdCA9IGRpZmYubGVmdCAqIC0xICsgJ3B4JztcbiAgICBrZXlGcmFtZVsyXS50b3AgPSBkaWZmLnRvcCArICdweCc7XG4gIH1cblxuICBmdW5jdGlvbiBjYWxjTmF2QmFyU2hpZnQoKSB7XG4gICAgY29uc3QgbmF2QmFyV2lkdGggPSBOdW1iZXIoJG5hdkJhci5jc3MoJ3dpZHRoJykuc2xpY2UoMCwgLTIpKTtcbiAgICBjb25zdCBuYXZCYXJQYWRkaW5nID0gTnVtYmVyKCRuYXZCYXIuY3NzKCdwYWRkaW5nJykuc2xpY2UoMCwgLTIpKTtcbiAgICBjb25zdCBidG5SaWdodCA9IE51bWJlcigkc2VhcmNoQnRuTmF2QmFyLmNzcygncmlnaHQnKS5zbGljZSgwLCAtMikpO1xuICAgIGNvbnN0IGJ0bldpZHRoID0gTnVtYmVyKCRzZWFyY2hCdG5OYXZCYXIuY3NzKCd3aWR0aCcpLnNsaWNlKDAsIC0yKSk7XG5cbiAgICByZXR1cm4gbmF2QmFyV2lkdGggLSBuYXZCYXJQYWRkaW5nIC0gYnRuUmlnaHQgLSBidG5XaWR0aDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyZWF0ZUFuaW1hdGlvbigpIHtcbiAgICBpZiAoc2VhcmNoQnRuQW5pbWF0aW9uKSB7XG4gICAgICBjYW5jZWxBbmltYXRlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICRzZWFyY2hCdG5NZW51WzBdLmFuaW1hdGUoa2V5RnJhbWUsIGFuaW1hdGVPcHRpb25zKTtcbiAgfVxuICBmdW5jdGlvbiB0b2dnbGVNZW51KCkge1xuICAgICRuYXZCYXIudG9nZ2xlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbiAgICAkbWVudVRyaWdnZXIudG9nZ2xlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbiAgfVxuICBmdW5jdGlvbiBoaWRlTWVudSgpIHtcbiAgICAkbmF2QmFyLnJlbW92ZUNsYXNzKEFDVElWRV9DTEFTUyk7XG4gICAgJG1lbnVUcmlnZ2VyLnJlbW92ZUNsYXNzKEFDVElWRV9DTEFTUyk7XG4gIH1cblxuICBmdW5jdGlvbiBkb1NlYXJjaCgpIHtcbiAgICBjb25zb2xlLmxvZygnU2VhcmNoIGlzIHByb2dyZXNzLi4uLi4nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBhdXNlQW5pbWF0ZSgpIHtcbiAgICBzZWFyY2hCdG5BbmltYXRpb24ucGF1c2UoKTtcbiAgICBpc0FjY29tcGxpc2hBbmltYXRpb24gPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsQW5pbWF0ZSgpIHtcbiAgICBzZWFyY2hCdG5BbmltYXRpb24uY2FuY2VsKCk7XG4gICAgaXNBY2NvbXBsaXNoQW5pbWF0aW9uID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBwbGF5QW5pbWF0ZSgpIHtcbiAgICBzZWFyY2hCdG5BbmltYXRpb24ucGxheWJhY2tSYXRlID0gMTtcbiAgICBzZWFyY2hCdG5BbmltYXRpb24ucGxheSgpO1xuICAgIHN0YXRlT2ZTZWFyY2hCdG4gPSB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gcmV2ZXJzZUFuaW1hdGUoKSB7XG4gICAgc2VhcmNoQnRuQW5pbWF0aW9uLnJldmVyc2UoKTtcbiAgICBpc0FjY29tcGxpc2hBbmltYXRpb24gPSBmYWxzZTtcbiAgfVxufSk7XG4iLCIvLyAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4vLyAgIG93bC5vd2xDYXJvdXNlbCgpO1xuLy8gfSk7XG5cbi8vICQoJy5ibG9nLXBvc3RzID4gLndyYXBwZXIgPiAuYXJ0aWNsZS1jb250YWluZXIub3dsLWNhcm91c2VsJykub3dsQ2Fyb3VzZWwoe1xuLy8gICBhdXRvcGxheTogZmFsc2UsXG4vLyAgIGF1dG9wbGF5VGltZW91dDogNjUwMCxcbi8vICAgYXV0b3BsYXlTcGVlZDogMTAwMCxcbi8vICAgbG9vcDogdHJ1ZSxcbi8vICAgbmF2VGV4dDogZmFsc2UsXG4vLyAgIG1hcmdpbjogMjQsXG4vLyAgIG5hdjogdHJ1ZSxcbi8vICAgcmVzcG9uc2l2ZToge1xuLy8gICAgIDA6IHtcbi8vICAgICAgIGl0ZW1zOiAxLFxuLy8gICAgIH0sXG4vLyAgICAgMzYwOiB7XG4vLyAgICAgICBpdGVtczogMSxcbi8vICAgICB9LFxuLy8gICAgIDc0NDoge1xuLy8gICAgICAgaXRlbXM6IDIsXG4vLyAgICAgfSxcbi8vICAgICAxMTAwOiB7XG4vLyAgICAgICBpdGVtczogNCxcbi8vICAgICB9LFxuLy8gICB9LFxuLy8gfSk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgJGFkZGl0aW9uYWxPZmZlcnNDYXJvdXNlbCA9ICQoJ21haW4gLmFkZGl0aW9uYWwtb2ZmZXJzID4gLndyYXBwZXIub3dsLWNhcm91c2VsJyk7XG4gIGNvbnN0ICRhcnRpY2xlQ29udGFpbmVyID0gJCgnLmJsb2ctcG9zdHMgPiAud3JhcHBlciA+IC5hcnRpY2xlLWNvbnRhaW5lci5vd2wtY2Fyb3VzZWwnKTtcbiAgY29uc3QgZGVsYXlSZWNhbGNSZXNpemUgPSA1MDA7XG4gIGxldCB0aW1lb3V0O1xuXG4gIHRvZ2dsZUFkZGl0aW9uYWxPZmZlcnMoKTtcbiAgcnVuQXJ0aWNsZUNvbnRhaW5lcigpO1xuXG4gICQod2luZG93KS5vbigncmVzaXplJywgb25XaW5kb3dSZXNpemUpO1xuXG4gIGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KHRvZ2dsZUFkZGl0aW9uYWxPZmZlcnMsIGRlbGF5UmVjYWxjUmVzaXplKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZUFkZGl0aW9uYWxPZmZlcnMoKSB7XG4gICAgbGV0IHNjcmVlbldpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG5cbiAgICBpZiAoc2NyZWVuV2lkdGggPD0gNjU1KSB7XG4gICAgICBpZiAoISRhZGRpdGlvbmFsT2ZmZXJzQ2Fyb3VzZWwuaGFzQ2xhc3MoJ293bC1sb2FkZWQnKSkge1xuICAgICAgICAkYWRkaXRpb25hbE9mZmVyc0Nhcm91c2VsLm93bENhcm91c2VsKHtcbiAgICAgICAgICBhdXRvcGxheTogZmFsc2UsXG4gICAgICAgICAgYXV0b3BsYXlUaW1lb3V0OiA2NTAwLFxuICAgICAgICAgIGF1dG9wbGF5U3BlZWQ6IDEwMDAsXG4gICAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgICBuYXZUZXh0OiBmYWxzZSxcbiAgICAgICAgICBuYXY6IHRydWUsXG4gICAgICAgICAgaXRlbXM6IDEsXG4gICAgICAgICAgY2VudGVyOiB0cnVlLFxuICAgICAgICAgIGF1dG9IZWlnaHQ6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoJGFkZGl0aW9uYWxPZmZlcnNDYXJvdXNlbC5oYXNDbGFzcygnb3dsLWxvYWRlZCcpKSB7XG4gICAgICAgICRhZGRpdGlvbmFsT2ZmZXJzQ2Fyb3VzZWwudHJpZ2dlcignZGVzdHJveS5vd2wuY2Fyb3VzZWwnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBydW5BcnRpY2xlQ29udGFpbmVyKCkge1xuICAgICRhcnRpY2xlQ29udGFpbmVyLm93bENhcm91c2VsKHtcbiAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgIGF1dG9wbGF5VGltZW91dDogNjUwMCxcbiAgICAgIGF1dG9wbGF5U3BlZWQ6IDEwMDAsXG4gICAgICBsb29wOiB0cnVlLFxuICAgICAgbmF2VGV4dDogZmFsc2UsXG4gICAgICBtYXJnaW46IDI0LFxuICAgICAgbmF2OiB0cnVlLFxuICAgICAgcmVzcG9uc2l2ZToge1xuICAgICAgICAwOiB7XG4gICAgICAgICAgaXRlbXM6IDEsXG4gICAgICAgIH0sXG4gICAgICAgIDYxMToge1xuICAgICAgICAgIGl0ZW1zOiAyLFxuICAgICAgICB9LFxuICAgICAgICA5MTE6IHtcbiAgICAgICAgICBpdGVtczogMyxcbiAgICAgICAgfSxcbiAgICAgICAgMTIwMToge1xuICAgICAgICAgIGl0ZW1zOiA0LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufSk7XG4iLCJjb25zdCAkcHJlbG9hZGVyQ29udGFpbmVyID0gJCgnLnByZWxvYWQtY29udGFpbmVyJyk7XG5jb25zdCAkc3RhdHVzTG9hZGluZyA9ICQoJy5zdGF0dXMtbG9hZGluZycpO1xuY29uc3QgJGJvZHkgPSAkKCdib2R5Jyk7XG5sZXQgcGFkZGluZ0JvZHlSaWdodDtcbmxldCBkaWZmZXI7XG5jb25zdCBpbWdDb3VudCA9ICQoJ2ltZycpLmxlbmd0aDtcbmNvbnN0IHBlcmNlbnQgPSBOdW1iZXIoKDEwMCAvIGltZ0NvdW50KS50b0ZpeGVkKCkpO1xubGV0IGxvYWRlZENvdW50ID0gMDtcbmxldCByZXN1bHQgPSAwO1xuXG5pbml0KCk7XG5cbmZ1bmN0aW9uIGluaXQoKSB7XG4gIGxvb2tTY3JvbGwoKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGltZ0NvdW50OyBpKyspIHtcbiAgICBjb25zdCBjb3B5X2ltZyA9IG5ldyBJbWFnZSgpO1xuICAgIGNvcHlfaW1nLnNyYyA9IGRvY3VtZW50LmltYWdlc1tpXS5zcmM7XG5cbiAgICAkKGNvcHlfaW1nKS5vbignbG9hZCcsIG9uQ29weUltZ0xvYWQpO1xuICAgICQoY29weV9pbWcpLm9uKCdlcnJvcicsIG9uQ29weUltZ0xvYWQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9uQ29weUltZ0xvYWQoKSB7XG4gIHJlc3VsdCArPSBwZXJjZW50O1xuICBsb2FkZWRDb3VudCsrO1xuXG4gIGlmIChyZXN1bHQgPj0gMTAwIHx8IGxvYWRlZENvdW50ID09IGltZ0NvdW50KSB7XG4gICAgJHByZWxvYWRlckNvbnRhaW5lci5hZGRDbGFzcygnaGlkZScpO1xuICAgIHVuTG9va1Njcm9sbCgpO1xuICB9IGVsc2Uge1xuICAgIGZpbGxQcm9ncmVzcygpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbGxQcm9ncmVzcygpIHtcbiAgJHN0YXR1c0xvYWRpbmcudGV4dChyZXN1bHQgKyAnICUnKTtcbn1cblxuZnVuY3Rpb24gbG9va1Njcm9sbCgpIHtcbiAgZGlmZmVyID0gd2luZG93LmlubmVyV2lkdGggLSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGg7XG5cbiAgaWYgKGRpZmZlcikge1xuICAgIGlmIChwYWRkaW5nQm9keVJpZ2h0KSB7XG4gICAgICBhZGRQYWRkaW5nUmlnaHRPZkJvZHkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFkZGluZ0JvZHlSaWdodCA9IE51bWJlcigkYm9keS5jc3MoJ3BhZGRpbmdSaWdodCcpLnNsaWNlKDAsIDIpKTtcbiAgICAgIGFkZFBhZGRpbmdSaWdodE9mQm9keSgpO1xuICAgIH1cbiAgfVxuICAkYm9keS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuXG4gIGZ1bmN0aW9uIGFkZFBhZGRpbmdSaWdodE9mQm9keSgpIHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9IFN0cmluZyhwYWRkaW5nQm9keVJpZ2h0ICsgZGlmZmVyKSArICdweCc7XG4gICAgcGFkZGluZ0JvZHlSaWdodCArPSBkaWZmZXI7XG4gIH1cbn1cbmZ1bmN0aW9uIHVuTG9va1Njcm9sbCgpIHtcbiAgaWYgKGRpZmZlcikge1xuICAgIHJlbW92ZVBhZGRpbmdSaWdodE9mQm9keSgpO1xuICB9XG4gICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnJyk7XG5cbiAgZnVuY3Rpb24gcmVtb3ZlUGFkZGluZ1JpZ2h0T2ZCb2R5KCkge1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gU3RyaW5nKHBhZGRpbmdCb2R5UmlnaHQgLSBkaWZmZXIpICsgJ3B4JztcbiAgICBwYWRkaW5nQm9keVJpZ2h0IC09IGRpZmZlcjtcbiAgfVxufVxuZnVuY3Rpb24gcmVtb3ZlUHJlbG9hZGVyKCkge1xuICBpZiAoJHByZWxvYWRlckNvbnRhaW5lcikge1xuICAgICRwcmVsb2FkZXJDb250YWluZXIucmVtb3ZlKCk7XG4gIH1cbn1cbiIsIiQoKCkgPT4ge1xuICBjb25zdCAkbWFya2VyTWluUHJpY2UgPSAkKFxuICAgICdtYWluIC5jYXRhbG9nIC53cmFwcGVyIC5sZWZ0LXNpZGUgLnByaWNlLWNvbnRhaW5lciAuY2F0ZWdvcmllcy1saXN0IC5wcm9ncmVzcy1jb250YWluZXIgLnByb2dyZXNzLWJhciAubWFya2VyLm1pbi1wcmljZSdcbiAgKTtcbiAgY29uc3QgJG1hcmtlck1heFByaWNlID0gJChcbiAgICAnbWFpbiAuY2F0YWxvZyAud3JhcHBlciAubGVmdC1zaWRlIC5wcmljZS1jb250YWluZXIgLmNhdGVnb3JpZXMtbGlzdCAucHJvZ3Jlc3MtY29udGFpbmVyIC5wcm9ncmVzcy1iYXIgLm1hcmtlci5tYXgtcHJpY2UnXG4gICk7XG4gIGNvbnN0ICRyYW5nZVByaWNlID0gJChcbiAgICAnbWFpbiAuY2F0YWxvZyAud3JhcHBlciAubGVmdC1zaWRlIC5wcmljZS1jb250YWluZXIgLmNhdGVnb3JpZXMtbGlzdCAucHJvZ3Jlc3MtY29udGFpbmVyIC5wcm9ncmVzcy1iYXIgLnJhbmdlJ1xuICApO1xuICBjb25zdCAkcHJpY2VDb250ZW50ID0gJChcbiAgICAnbWFpbiAuY2F0YWxvZyAud3JhcHBlciAubGVmdC1zaWRlIC5wcmljZS1jb250YWluZXIgLmNhdGVnb3JpZXMtbGlzdCAucHJpY2UgLnByaWNlLWNvbnRlbnQnXG4gICk7XG4gIGNvbnN0ICRmaWx0ZXJCdG4gPSAkKCdtYWluIC5jYXRhbG9nIC53cmFwcGVyIC5sZWZ0LXNpZGUgLnByaWNlLWNvbnRhaW5lciAuY2F0ZWdvcmllcy1saXN0IC5idG4nKTtcbiAgbGV0IG1pbiA9IDM5O1xuICBsZXQgbWF4ID0gMTIzMDtcbiAgY29uc3QgTUFSS0VSX1dJRFRIID0gMjc7XG4gIGNvbnN0IHJhbmdlID0geyBtaW5Db3N0czogbnVsbCwgbWF4Q29zdHM6IG51bGwgfTtcblxuICAkbWFya2VyTWluUHJpY2Uub24oJ2lucHV0Jywgb25NYXJrZXJQcmljZUlucHV0KTtcbiAgJG1hcmtlck1heFByaWNlLm9uKCdpbnB1dCcsIG9uTWFya2VyUHJpY2VJbnB1dCk7XG4gICRmaWx0ZXJCdG4ub24oJ2NsaWNrJywgb25GaWx0ZXJCdG5DbGljayk7XG5cbiAgaW5pdCgpO1xuXG4gIGZ1bmN0aW9uIG9uTWFya2VyUHJpY2VJbnB1dCgpIHtcbiAgICBpZiAoTnVtYmVyKCRtYXJrZXJNaW5QcmljZS52YWwoKSkgIT09IG1pbikge1xuICAgICAgbWluID0gTnVtYmVyKCRtYXJrZXJNaW5QcmljZS52YWwoKSk7XG4gICAgfVxuICAgIGlmIChOdW1iZXIoJG1hcmtlck1heFByaWNlLnZhbCgpKSAhPT0gbWF4KSB7XG4gICAgICBtYXggPSBOdW1iZXIoJG1hcmtlck1heFByaWNlLnZhbCgpKTtcbiAgICB9XG5cbiAgICBpZiAobWluID4gbWF4KSB7XG4gICAgICBbbWluLCBtYXhdID0gW21heCwgbWluXTtcbiAgICAgICRtYXJrZXJNaW5QcmljZS52YWwobWluKTtcbiAgICAgICRtYXJrZXJNYXhQcmljZS52YWwobWF4KTtcbiAgICB9XG4gICAgY29uc3QgY29udGVudCA9IGNyYWZ0Q29udGVudChtaW4sIG1heCk7XG5cbiAgICBzZXRSYW5nZSgpO1xuICAgIHNldFRodW1icygpO1xuICAgIGZpbGxQcmljZShjb250ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uRmlsdGVyQnRuQ2xpY2soKSB7XG4gICAgcmFuZ2UubWluQ29zdHMgPSBtaW47XG4gICAgcmFuZ2UubWF4Q29zdHMgPSBtYXg7XG5cbiAgICBmaWx0ZXJCeUNvc3RzKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0KCkge1xuICAgIGNvbnN0IGNvbnRlbnQgPSBjcmFmdENvbnRlbnQobWluLCBtYXgpO1xuXG4gICAgc2V0UmFuZ2UoKTtcbiAgICBzZXRUaHVtYnMoKTtcbiAgICBmaWxsUHJpY2UoY29udGVudCk7XG4gIH1cblxuICBmdW5jdGlvbiBmaWxsUHJpY2UoY29udGVudCkge1xuICAgICRwcmljZUNvbnRlbnQudGV4dChjb250ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNyYWZ0Q29udGVudChtaW4sIG1heCkge1xuICAgIHJldHVybiBgJCR7bWlufSAtICQke21heH1gO1xuICB9XG5cbiAgZnVuY3Rpb24gc2V0VGh1bWJzKCkge1xuICAgICRtYXJrZXJNaW5QcmljZS52YWwobWluKTtcbiAgICAkbWFya2VyTWF4UHJpY2UudmFsKG1heCk7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRSYW5nZSgpIHtcbiAgICBjb25zdCBtYXhBdHRyID0gTnVtYmVyKCRtYXJrZXJNYXhQcmljZS5hdHRyKCdtYXgnKSk7XG4gICAgY29uc3QgbWluQXR0ciA9IE51bWJlcigkbWFya2VyTWF4UHJpY2UuYXR0cignbWluJykpO1xuXG4gICAgY29uc3QgbWluUGVyY2VudCA9ICgobWluIC0gbWluQXR0cikgLyAobWF4QXR0ciAtIG1pbkF0dHIpKSAqIDEwMDtcbiAgICBjb25zdCBtYXhQZXJjZW50ID0gKChtYXggLSBtaW5BdHRyKSAvIChtYXhBdHRyIC0gbWluQXR0cikpICogMTAwO1xuXG4gICAgY29uc3QgbGVmdCA9IG1pblBlcmNlbnQgKyAnJSc7XG4gICAgY29uc3Qgd2lkdGggPSBtYXhQZXJjZW50IC0gbWluUGVyY2VudCArICclJztcblxuICAgICRyYW5nZVByaWNlLmNzcygnbGVmdCcsIGxlZnQpLmNzcygnd2lkdGgnLCB3aWR0aCk7XG4gIH1cblxuICBmdW5jdGlvbiBmaWx0ZXJCeUNvc3RzKCkge1xuICAgIGNvbnNvbGUubG9nKCdGaWx0ZXJpbmcuLi4uLicsIHJhbmdlKTtcbiAgfVxufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0ICRmaWx0ZXJCdG4gPSAkKCcuY2F0YWxvZyAucmlnaHQtc2lkZSAuZmlsdGVyLWJ0bicpO1xuY29uc3QgJGxlZnRTaWRlID0gJCgnLmNhdGFsb2cgLmxlZnQtc2lkZScpO1xuY29uc3QgJGxvZ0luQnRuID0gJChcbiAgJ2hlYWRlciAud3JhcHBlciAubWVudS1jb250YWluZXIgLmxvZy1pbi1idG4sIGhlYWRlciAud3JhcHBlciAubmF2YmFyIC5sb2ctaW4tYnRuJ1xuKTtcbmNvbnN0ICRjbG9zZVJlZ2lzdGVyUGFnZSA9ICQoJ2hlYWRlciAucmVnaXN0ZXItcGFnZSAud3JhcHBlci1yZWdpc3RlciAuY2xvc2UtcGFnZScpO1xuY29uc3QgJHJlZ2lzdGVyUGFnZSA9ICQoJ2hlYWRlciAucmVnaXN0ZXItcGFnZScpO1xuY29uc3QgJG92ZXJsYXkgPSAkKCdoZWFkZXIgLm92ZXJsYXknKTtcbmNvbnN0IEFDVElWRV9DTEFTUyA9ICdhY3RpdmUnO1xuXG4kZmlsdGVyQnRuLm9uKCdjbGljaycsIG9uRmlsdGVyQnRuQ2xpY2spO1xuJGxvZ0luQnRuLm9uKCdjbGljaycsIG9uTG9nSW5CdG5DbGljayk7XG4kb3ZlcmxheS5vbignY2xpY2snLCBvbk92ZXJsYXlDbGljayk7XG4kY2xvc2VSZWdpc3RlclBhZ2Uub24oJ2NsaWNrJywgb25PdmVybGF5Q2xpY2spO1xuXG5mdW5jdGlvbiBvbkZpbHRlckJ0bkNsaWNrKCkge1xuICAkbGVmdFNpZGUudG9nZ2xlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbn1cblxuZnVuY3Rpb24gb25Mb2dJbkJ0bkNsaWNrKCkge1xuICAkb3ZlcmxheS5hZGRDbGFzcyhBQ1RJVkVfQ0xBU1MpO1xuICAkcmVnaXN0ZXJQYWdlLmFkZENsYXNzKEFDVElWRV9DTEFTUyk7XG59XG5cbmZ1bmN0aW9uIG9uT3ZlcmxheUNsaWNrKCkge1xuICAkb3ZlcmxheS5yZW1vdmVDbGFzcyhBQ1RJVkVfQ0xBU1MpO1xuICAkcmVnaXN0ZXJQYWdlLnJlbW92ZUNsYXNzKEFDVElWRV9DTEFTUyk7XG59XG4iXX0=
