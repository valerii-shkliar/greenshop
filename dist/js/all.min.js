$(()=>{$(".select-cards-sorting").selectmenu()}),$(function(){let o=$("header .menu-container .search-box .search-btn"),r=$("header .navbar"),i=$("header .wrapper .navbar form .search-btn");$("header .wrapper .navbar form .search");let n=$("header .wrapper .logo-container .burger-menu .menu-trigger");var e=$(".logo-container .burger-menu"),t=$("header .wrapper .navbar form[name='search']");let a=".navbar.active",l="active",s,c,d,g=!1,u,p=[{left:"0px",top:"0px",opacity:1,offset:0},{opacity:.3,visibility:"visible",offset:.9},{left:"",top:"",opacity:0,visibility:"hidden",offset:1}],f={duration:400,easing:"ease-out",fill:"forwards"};function m(){var e,t;r.toggleClass(l),n.toggleClass(l),i&&$(window).width()<=650&&(g||(s=s||C(i),e=C(o),t=(()=>{var e=Number(r.css("width").slice(0,-2)),t=Number(r.css("padding").slice(0,-2)),o=Number(i.css("right").slice(0,-2)),n=Number(i.css("width").slice(0,-2));return e-t-o-n})(),e=c=((e,t,o)=>({left:t.left-o,top:e.top-t.top}))(s,e,t),p[2].left=-1*e.left+"px",p[2].top=e.top+"px",(d=(()=>(d&&b(),o[0].animate(p,f)))()).pause(),g=!0),r.hasClass(l)&&(d.playbackRate=1,d.play(),stateOfSearchBtn=!0),r.hasClass(l)||y())}function h(){w(),b()}function C(e){e=e[0].getBoundingClientRect();return{left:e.left,top:e.top}}function w(){r.removeClass(l),n.removeClass(l)}function v(){console.log("Search is progress.....")}function b(){d.cancel(),g=!1}function y(){d.reverse(),g=!1}e.on("click",m),$(window).on("resize",function(){clearTimeout(u),u=setTimeout(h,500)}),$(document).on("click",function(e){!$(this).has(a).length||$(e.target).closest(a)[0]||$(e.target).closest(".burger-menu")[0]||$(e.target).closest("header .menu-container .search-box .search-btn")[0]||(w(),$(window).width()<=650&&y())}),o.on("click",function(e){$(window).width()<=540&&!$(this).closest(a)[0]&&m();$(this).closest(a)[0]&&v()}),t.on("submit",function(e){e.preventDefault(),v()}),$(".navbar .menu .nested-drop-down > .menu-item").on("click",function(){$(this).closest(".nested-drop-down").toggleClass(l),$(this).next(".drop-down").toggleClass(l)}),$(".nested-drop-down .nested-drop-down-second .menu-item").on("click",function(){$(this).closest(".nested-drop-down-second").toggleClass(l),$(this).next(".drop-down").toggleClass(l)})}),$(document).ready(function(){let e=$("main .additional-offers > .wrapper.owl-carousel"),t=$(".blog-posts > .wrapper > .article-container.owl-carousel"),o;function n(){$(window).width()<=655?e.hasClass("owl-loaded")||e.owlCarousel({autoplay:!1,autoplayTimeout:6500,autoplaySpeed:1e3,loop:!0,navText:!1,nav:!0,items:1,center:!0,autoHeight:!0}):e.hasClass("owl-loaded")&&e.trigger("destroy.owl.carousel")}n(),t.owlCarousel({autoplay:!1,autoplayTimeout:6500,autoplaySpeed:1e3,loop:!0,navText:!1,margin:24,nav:!0,responsive:{0:{items:1},611:{items:2},911:{items:3},1201:{items:4}}}),$(window).on("resize",function(){clearTimeout(o),o=setTimeout(n,500)})});let $preloaderContainer=$(".preload-container"),$statusLoading=$(".status-loading"),$body=$("body"),paddingBodyRight,differ,imgCount=$("img").length,percent=Number((100/imgCount).toFixed()),loadedCount=0,result=0;function init(){lookScroll();for(let e=0;e<imgCount;e++){var t=new Image;t.src=document.images[e].src,$(t).on("load",onCopyImgLoad),$(t).on("error",onCopyImgLoad)}}function onCopyImgLoad(){result+=percent,loadedCount++,(100<=result||loadedCount==imgCount?($preloaderContainer.addClass("hide"),unLookScroll):fillProgress)()}function fillProgress(){$statusLoading.text(result+" %")}function lookScroll(){function e(){document.body.style.paddingRight=String(paddingBodyRight+differ)+"px",paddingBodyRight+=differ}(differ=window.innerWidth-document.documentElement.clientWidth)&&(paddingBodyRight=paddingBodyRight||Number($body.css("paddingRight").slice(0,2)),e()),$body.css("overflow","hidden")}function unLookScroll(){differ&&(document.body.style.paddingRight=String(paddingBodyRight-differ)+"px",paddingBodyRight-=differ),$body.css("overflow","")}function removePreloader(){$preloaderContainer&&$preloaderContainer.remove()}init(),$(()=>{let t=$("main .catalog .wrapper .left-side .price-container .categories-list .progress-container .progress-bar .marker.min-price"),r=$("main .catalog .wrapper .left-side .price-container .categories-list .progress-container .progress-bar .marker.max-price"),i=$("main .catalog .wrapper .left-side .price-container .categories-list .progress-container .progress-bar .range"),o=$("main .catalog .wrapper .left-side .price-container .categories-list .price .price-content");var e=$("main .catalog .wrapper .left-side .price-container .categories-list .btn");let a=39,l=1230;let n={minCosts:null,maxCosts:null};function s(){Number(t.val())!==a&&(a=Number(t.val())),Number(r.val())!==l&&(l=Number(r.val())),a>l&&([a,l]=[l,a],t.val(a),r.val(l));var e=d(a,l);u(),g(),c(e)}function c(e){o.text(e)}function d(e,t){return`$${e} - $`+t}function g(){t.val(a),r.val(l)}function u(){var e=Number(r.attr("max")),t=Number(r.attr("min")),o=(a-t)/(e-t)*100,n=o+"%",e=(l-t)/(e-t)*100-o+"%";i.css("left",n).css("width",e)}t.on("input",s),r.on("input",s),e.on("click",function(){n.minCosts=a,n.maxCosts=l,console.log("Filtering.....",n)}),e=d(a,l),u(),g(),c(e)});let $filterBtn=$(".catalog .right-side .filter-btn"),$leftSide=$(".catalog .left-side"),$logInBtn=$("header .wrapper .menu-container .log-in-btn, header .wrapper .navbar .log-in-btn"),$closeRegisterPage=$("header .register-page .wrapper-register .close-page"),$registerPage=$("header .register-page"),$overlay=$("header .overlay"),ACTIVE_CLASS="active";function onFilterBtnClick(){$leftSide.toggleClass(ACTIVE_CLASS)}function onLogInBtnClick(){$overlay.addClass(ACTIVE_CLASS),$registerPage.addClass(ACTIVE_CLASS)}function onOverlayClick(){$overlay.removeClass(ACTIVE_CLASS),$registerPage.removeClass(ACTIVE_CLASS)}$filterBtn.on("click",onFilterBtnClick),$logInBtn.on("click",onLogInBtnClick),$overlay.on("click",onOverlayClick),$closeRegisterPage.on("click",onOverlayClick);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcmRzLXNvcnRpbmcuanMiLCJtb2JpbGUtbWVudS5qcyIsIm93bC1jYXJ1c2VsLmpzIiwicHJlbG9hZGVyLmpzIiwicHJpY2UtcmFuZ2UuanMiLCJzY3JpcHRzLmpzIl0sIm5hbWVzIjpbIiQiLCJzZWxlY3RtZW51IiwiJHNlYXJjaEJ0bk1lbnUiLCIkbmF2QmFyIiwiJHNlYXJjaEJ0bk5hdkJhciIsIiRtZW51VHJpZ2dlciIsIiRidXJnZXJNZW51IiwiJHNlYXJjaEZvcm0iLCJOQVZCQVJfQUNUSVZFX1NFTEVDVE9SIiwiQUNUSVZFX0NMQVNTIiwiYnRuTmF2QmFyQ29vcmRzIiwiZGlmZiIsInNlYXJjaEJ0bkFuaW1hdGlvbiIsImlzQWNjb21wbGlzaEFuaW1hdGlvbiIsInRpbWVvdXQiLCJrZXlGcmFtZSIsImxlZnQiLCJ0b3AiLCJvcGFjaXR5Iiwib2Zmc2V0IiwidmlzaWJpbGl0eSIsImFuaW1hdGVPcHRpb25zIiwiZHVyYXRpb24iLCJlYXNpbmciLCJmaWxsIiwib25CdXJnZXJNZW51Q2xpY2siLCJidG5NZW51Q29vcmRzIiwibmF2QmFyU2hpZnQiLCJ0b2dnbGVDbGFzcyIsIndpbmRvdyIsIndpZHRoIiwiY2FsY0Nvb3JkcyIsIm5hdkJhcldpZHRoIiwiTnVtYmVyIiwiY3NzIiwic2xpY2UiLCJuYXZCYXJQYWRkaW5nIiwiYnRuUmlnaHQiLCJidG5XaWR0aCIsImNhbmNlbEFuaW1hdGUiLCJhbmltYXRlIiwicGF1c2UiLCJoYXNDbGFzcyIsInBsYXliYWNrUmF0ZSIsInBsYXkiLCJzdGF0ZU9mU2VhcmNoQnRuIiwicmV2ZXJzZUFuaW1hdGUiLCJpbml0QW5pbWF0aW9uQWZ0ZXJSZXNpemUiLCJoaWRlTWVudSIsImVsIiwiY29vcmRzIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwicmVtb3ZlQ2xhc3MiLCJkb1NlYXJjaCIsImNvbnNvbGUiLCJsb2ciLCJjYW5jZWwiLCJyZXZlcnNlIiwib24iLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0IiwiZG9jdW1lbnQiLCJlIiwidGhpcyIsImhhcyIsImxlbmd0aCIsInRhcmdldCIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsIm5leHQiLCJyZWFkeSIsIiRhZGRpdGlvbmFsT2ZmZXJzQ2Fyb3VzZWwiLCIkYXJ0aWNsZUNvbnRhaW5lciIsInRvZ2dsZUFkZGl0aW9uYWxPZmZlcnMiLCJvd2xDYXJvdXNlbCIsImF1dG9wbGF5IiwiYXV0b3BsYXlUaW1lb3V0IiwiYXV0b3BsYXlTcGVlZCIsImxvb3AiLCJuYXZUZXh0IiwibmF2IiwiaXRlbXMiLCJjZW50ZXIiLCJhdXRvSGVpZ2h0IiwidHJpZ2dlciIsIm1hcmdpbiIsInJlc3BvbnNpdmUiLCIwIiwiNjExIiwiOTExIiwiMTIwMSIsIiRwcmVsb2FkZXJDb250YWluZXIiLCIkc3RhdHVzTG9hZGluZyIsIiRib2R5IiwicGFkZGluZ0JvZHlSaWdodCIsImRpZmZlciIsImltZ0NvdW50IiwicGVyY2VudCIsInRvRml4ZWQiLCJsb2FkZWRDb3VudCIsInJlc3VsdCIsImluaXQiLCJsb29rU2Nyb2xsIiwibGV0IiwiaSIsImNvcHlfaW1nIiwiSW1hZ2UiLCJzcmMiLCJpbWFnZXMiLCJvbkNvcHlJbWdMb2FkIiwiYWRkQ2xhc3MiLCJ1bkxvb2tTY3JvbGwiLCJmaWxsUHJvZ3Jlc3MiLCJ0ZXh0IiwiYWRkUGFkZGluZ1JpZ2h0T2ZCb2R5IiwiYm9keSIsInN0eWxlIiwicGFkZGluZ1JpZ2h0IiwiU3RyaW5nIiwiaW5uZXJXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwicmVtb3ZlUHJlbG9hZGVyIiwicmVtb3ZlIiwiJG1hcmtlck1pblByaWNlIiwiJG1hcmtlck1heFByaWNlIiwiJHJhbmdlUHJpY2UiLCIkcHJpY2VDb250ZW50IiwiJGZpbHRlckJ0biIsIm1pbiIsIm1heCIsInJhbmdlIiwibWluQ29zdHMiLCJtYXhDb3N0cyIsIm9uTWFya2VyUHJpY2VJbnB1dCIsInZhbCIsImNvbnRlbnQiLCJjcmFmdENvbnRlbnQiLCJzZXRSYW5nZSIsInNldFRodW1icyIsImZpbGxQcmljZSIsIm1heEF0dHIiLCJhdHRyIiwibWluQXR0ciIsIm1pblBlcmNlbnQiLCIkbGVmdFNpZGUiLCIkbG9nSW5CdG4iLCIkY2xvc2VSZWdpc3RlclBhZ2UiLCIkcmVnaXN0ZXJQYWdlIiwiJG92ZXJsYXkiLCJvbkZpbHRlckJ0bkNsaWNrIiwib25Mb2dJbkJ0bkNsaWNrIiwib25PdmVybGF5Q2xpY2siXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFBLEtBQ0FBLEVBQUEsdUJBQUEsRUFBQUMsV0FBQSxDQUNBLENBQUEsRUNGQUQsRUFBQSxXQUNBLElBQUFFLEVBQUFGLEVBQUEsZ0RBQUEsRUFDQUcsRUFBQUgsRUFBQSxnQkFBQSxFQUNBSSxFQUFBSixFQUFBLDBDQUFBLEVBQ0FBLEVBQUEsc0NBQUEsRUFDQSxJQUFBSyxFQUFBTCxFQUFBLDREQUFBLEVBQ0EsSUFBQU0sRUFBQU4sRUFBQSw4QkFBQSxFQUNBTyxFQUFBUCxFQUFBLDZDQUFBLEVBQ0EsSUFBQVEsRUFBQSxpQkFHQUMsRUFBQSxTQUdBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUFBLENBQUEsRUFDQUMsRUFFQUMsRUFBQSxDQUNBLENBQUFDLEtBQUEsTUFBQUMsSUFBQSxNQUFBQyxRQUFBLEVBQUFDLE9BQUEsQ0FBQSxFQUNBLENBQUFELFFBQUEsR0FBQUUsV0FBQSxVQUFBRCxPQUFBLEVBQUEsRUFDQSxDQUFBSCxLQUFBLEdBQUFDLElBQUEsR0FBQUMsUUFBQSxFQUFBRSxXQUFBLFNBQUFELE9BQUEsQ0FBQSxHQUVBRSxFQUFBLENBQ0FDLFNBQUEsSUFDQUMsT0FBQSxXQUNBQyxLQUFBLFVBQ0EsRUFrQkEsU0FBQUMsSUFHQSxJQStEQUMsRUFDQUMsRUEyQ0F4QixFQUFBeUIsWUFBQW5CLENBQUEsRUFDQUosRUFBQXVCLFlBQUFuQixDQUFBLEVBNUdBTCxHQUFBSixFQUFBNkIsTUFBQSxFQUFBQyxNQUFBLEdBdENBLE1BdUNBakIsSUEwREFILEVBQUFBLEdBQ0FxQixFQUFBM0IsQ0FBQSxFQUdBc0IsRUFB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QWpHLFlBQUEzQyxZQUFBLEVBQ0EySSxjQUFBaEcsWUFBQTNDLFlBQUEsQ0FDQSxDQWpCQXVILFdBQUF0RSxHQUFBLFFBQUE0RixnQkFBQSxFQUNBSixVQUFBeEYsR0FBQSxRQUFBNkYsZUFBQSxFQUNBRixTQUFBM0YsR0FBQSxRQUFBOEYsY0FBQSxFQUNBTCxtQkFBQXpGLEdBQUEsUUFBQThGLGNBQUEiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoKCkgPT4ge1xuICAkKCcuc2VsZWN0LWNhcmRzLXNvcnRpbmcnKS5zZWxlY3RtZW51KCk7XG59KTtcbiIsIiQoZnVuY3Rpb24gKCkge1xuICBjb25zdCAkc2VhcmNoQnRuTWVudSA9ICQoJ2hlYWRlciAubWVudS1jb250YWluZXIgLnNlYXJjaC1ib3ggLnNlYXJjaC1idG4nKTtcbiAgY29uc3QgJG5hdkJhciA9ICQoJ2hlYWRlciAubmF2YmFyJyk7XG4gIGNvbnN0ICRzZWFyY2hCdG5OYXZCYXIgPSAkKCdoZWFkZXIgLndyYXBwZXIgLm5hdmJhciBmb3JtIC5zZWFyY2gtYnRuJyk7XG4gIGNvbnN0ICRzZWFyY2hJbnB1dE5hdkJhciA9ICQoJ2hlYWRlciAud3JhcHBlciAubmF2YmFyIGZvcm0gLnNlYXJjaCcpO1xuICBjb25zdCAkbWVudVRyaWdnZXIgPSAkKCdoZWFkZXIgLndyYXBwZXIgLmxvZ28tY29udGFpbmVyIC5idXJnZXItbWVudSAubWVudS10cmlnZ2VyJyk7XG4gIGNvbnN0ICRidXJnZXJNZW51ID0gJCgnLmxvZ28tY29udGFpbmVyIC5idXJnZXItbWVudScpO1xuICBjb25zdCAkc2VhcmNoRm9ybSA9ICQoXCJoZWFkZXIgLndyYXBwZXIgLm5hdmJhciBmb3JtW25hbWU9J3NlYXJjaCddXCIpO1xuICBjb25zdCBOQVZCQVJfQUNUSVZFX1NFTEVDVE9SID0gJy5uYXZiYXIuYWN0aXZlJztcbiAgY29uc3QgQlVSR0VSX01FTlVfU0VMRUNUT1IgPSAnLmJ1cmdlci1tZW51JztcbiAgY29uc3QgU0VBUkNIX0JUTl9NRU5VX1NFTEVDVE9SID0gJ2hlYWRlciAubWVudS1jb250YWluZXIgLnNlYXJjaC1ib3ggLnNlYXJjaC1idG4nO1xuICBjb25zdCBBQ1RJVkVfQ0xBU1MgPSAnYWN0aXZlJztcbiAgY29uc3QgTUFYX1dJRFRIX0ZPUl9NT1ZJTkdfU0VBUkNIID0gNjUwO1xuICBjb25zdCBNQVhfV0lEVEhfRk9SX09QRU5fU0VBUkNIX0JBUiA9IDU0MDtcbiAgbGV0IGJ0bk5hdkJhckNvb3JkcztcbiAgbGV0IGRpZmY7XG4gIGxldCBzZWFyY2hCdG5BbmltYXRpb247XG4gIGxldCBpc0FjY29tcGxpc2hBbmltYXRpb24gPSBmYWxzZTtcbiAgbGV0IHRpbWVvdXQ7XG4gIGNvbnN0IERFTEFZX1JFQ0FMQ19SRVNJWkUgPSA1MDA7XG4gIGNvbnN0IGtleUZyYW1lID0gW1xuICAgIHsgbGVmdDogJzBweCcsIHRvcDogJzBweCcsIG9wYWNpdHk6IDEsIG9mZnNldDogMCB9LFxuICAgIHsgb3BhY2l0eTogMC4zLCB2aXNpYmlsaXR5OiAndmlzaWJsZScsIG9mZnNldDogMC45IH0sXG4gICAgeyBsZWZ0OiAnJywgdG9wOiAnJywgb3BhY2l0eTogMCwgdmlzaWJpbGl0eTogJ2hpZGRlbicsIG9mZnNldDogMSB9LFxuICBdO1xuICBjb25zdCBhbmltYXRlT3B0aW9ucyA9IHtcbiAgICBkdXJhdGlvbjogNDAwLFxuICAgIGVhc2luZzogJ2Vhc2Utb3V0JyxcbiAgICBmaWxsOiAnZm9yd2FyZHMnLFxuICB9O1xuXG4gICRidXJnZXJNZW51Lm9uKCdjbGljaycsIG9uQnVyZ2VyTWVudUNsaWNrKTtcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIG9uRG9jdW1lbnRDbGljayk7XG4gICRzZWFyY2hCdG5NZW51Lm9uKCdjbGljaycsIG9uU2VhcmNoQnRuTWVudUNsaWNrKTtcbiAgJHNlYXJjaEZvcm0ub24oJ3N1Ym1pdCcsIG9uU2VhcmNoRm9ybVN1Ym1pdCk7XG5cbiAgJCgnLm5hdmJhciAubWVudSAubmVzdGVkLWRyb3AtZG93biA+IC5tZW51LWl0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubmVzdGVkLWRyb3AtZG93bicpLnRvZ2dsZUNsYXNzKEFDVElWRV9DTEFTUyk7XG4gICAgJCh0aGlzKS5uZXh0KCcuZHJvcC1kb3duJykudG9nZ2xlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbiAgfSk7XG5cbiAgJCgnLm5lc3RlZC1kcm9wLWRvd24gLm5lc3RlZC1kcm9wLWRvd24tc2Vjb25kIC5tZW51LWl0ZW0nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgJCh0aGlzKS5jbG9zZXN0KCcubmVzdGVkLWRyb3AtZG93bi1zZWNvbmQnKS50b2dnbGVDbGFzcyhBQ1RJVkVfQ0xBU1MpO1xuICAgICQodGhpcykubmV4dCgnLmRyb3AtZG93bicpLnRvZ2dsZUNsYXNzKEFDVElWRV9DTEFTUyk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIG9uQnVyZ2VyTWVudUNsaWNrKCkge1xuICAgIHRvZ2dsZU1lbnUoKTtcblxuICAgIGlmICgkc2VhcmNoQnRuTmF2QmFyICYmICQod2luZG93KS53aWR0aCgpIDw9IE1BWF9XSURUSF9GT1JfTU9WSU5HX1NFQVJDSCkge1xuICAgICAgaWYgKCFpc0FjY29tcGxpc2hBbmltYXRpb24pIHtcbiAgICAgICAgaW5pdEFuaW1hdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoJG5hdkJhci5oYXNDbGFzcyhBQ1RJVkVfQ0xBU1MpKSB7XG4gICAgICAgIHBsYXlBbmltYXRlKCk7XG4gICAgICB9XG4gICAgICBpZiAoISRuYXZCYXIuaGFzQ2xhc3MoQUNUSVZFX0NMQVNTKSkge1xuICAgICAgICByZXZlcnNlQW5pbWF0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uV2luZG93UmVzaXplKCkge1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcblxuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGluaXRBbmltYXRpb25BZnRlclJlc2l6ZSwgREVMQVlfUkVDQUxDX1JFU0laRSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0QW5pbWF0aW9uQWZ0ZXJSZXNpemUoKSB7XG4gICAgaGlkZU1lbnUoKTtcbiAgICBjYW5jZWxBbmltYXRlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkRvY3VtZW50Q2xpY2soZSkge1xuICAgIGlmIChcbiAgICAgICQodGhpcykuaGFzKE5BVkJBUl9BQ1RJVkVfU0VMRUNUT1IpLmxlbmd0aCAmJlxuICAgICAgISQoZS50YXJnZXQpLmNsb3Nlc3QoTkFWQkFSX0FDVElWRV9TRUxFQ1RPUilbMF0gJiZcbiAgICAgICEkKGUudGFyZ2V0KS5jbG9zZXN0KEJVUkdFUl9NRU5VX1NFTEVDVE9SKVswXSAmJlxuICAgICAgISQoZS50YXJnZXQpLmNsb3Nlc3QoU0VBUkNIX0JUTl9NRU5VX1NFTEVDVE9SKVswXVxuICAgICkge1xuICAgICAgaGlkZU1lbnUoKTtcblxuICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpIDw9IE1BWF9XSURUSF9GT1JfTU9WSU5HX1NFQVJDSCkge1xuICAgICAgICByZXZlcnNlQW5pbWF0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2VhcmNoQnRuTWVudUNsaWNrKGUpIHtcbiAgICBpZiAoXG4gICAgICAkKHdpbmRvdykud2lkdGgoKSA8PSBNQVhfV0lEVEhfRk9SX09QRU5fU0VBUkNIX0JBUiAmJlxuICAgICAgISQodGhpcykuY2xvc2VzdChOQVZCQVJfQUNUSVZFX1NFTEVDVE9SKVswXVxuICAgICkge1xuICAgICAgb25CdXJnZXJNZW51Q2xpY2soKTtcbiAgICB9XG4gICAgaWYgKCQodGhpcykuY2xvc2VzdChOQVZCQVJfQUNUSVZFX1NFTEVDVE9SKVswXSkge1xuICAgICAgZG9TZWFyY2goKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNlYXJjaEZvcm1TdWJtaXQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGRvU2VhcmNoKCk7XG4gIH1cblxuICBmdW5jdGlvbiBpbml0QW5pbWF0aW9uKCkge1xuICAgIGlmICghYnRuTmF2QmFyQ29vcmRzKSB7XG4gICAgICBidG5OYXZCYXJDb29yZHMgPSBjYWxjQ29vcmRzKCRzZWFyY2hCdG5OYXZCYXIpO1xuICAgIH1cblxuICAgIGNvbnN0IGJ0bk1lbnVDb29yZHMgPSBjYWxjQ29vcmRzKCRzZWFyY2hCdG5NZW51KTtcbiAgICBjb25zdCBuYXZCYXJTaGlmdCA9IGNhbGNOYXZCYXJTaGlmdCgpO1xuXG4gICAgZGlmZiA9IGNvdW50T2Zmc2V0QnRuKGJ0bk5hdkJhckNvb3JkcywgYnRuTWVudUNvb3JkcywgbmF2QmFyU2hpZnQpO1xuXG4gICAgZmlsbEtleUZyYW1lKGRpZmYpO1xuICAgIHNlYXJjaEJ0bkFuaW1hdGlvbiA9IGNyZWF0ZUFuaW1hdGlvbigpO1xuICAgIHBhdXNlQW5pbWF0ZSgpO1xuICB9XG4gIGZ1bmN0aW9uIGNhbGNDb29yZHMoZWwpIHtcbiAgICBjb25zdCBjb29yZHMgPSBlbFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgIHJldHVybiB7IGxlZnQ6IGNvb3Jkcy5sZWZ0LCB0b3A6IGNvb3Jkcy50b3AgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvdW50T2Zmc2V0QnRuKGJ0bk5hdkJhckNvb3JkcywgYnRuTWVudUNvb3JkcywgbmF2QmFyU2hpZnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogYnRuTWVudUNvb3Jkcy5sZWZ0IC0gbmF2QmFyU2hpZnQsXG4gICAgICB0b3A6IGJ0bk5hdkJhckNvb3Jkcy50b3AgLSBidG5NZW51Q29vcmRzLnRvcCxcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gZmlsbEtleUZyYW1lKGRpZmYpIHtcbiAgICBrZXlGcmFtZVsyXS5sZWZ0ID0gZGlmZi5sZWZ0ICogLTEgKyAncHgnO1xuICAgIGtleUZyYW1lWzJdLnRvcCA9IGRpZmYudG9wICsgJ3B4JztcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbGNOYXZCYXJTaGlmdCgpIHtcbiAgICBjb25zdCBuYXZCYXJXaWR0aCA9IE51bWJlcigkbmF2QmFyLmNzcygnd2lkdGgnKS5zbGljZSgwLCAtMikpO1xuICAgIGNvbnN0IG5hdkJhclBhZGRpbmcgPSBOdW1iZXIoJG5hdkJhci5jc3MoJ3BhZGRpbmcnKS5zbGljZSgwLCAtMikpO1xuICAgIGNvbnN0IGJ0blJpZ2h0ID0gTnVtYmVyKCRzZWFyY2hCdG5OYXZCYXIuY3NzKCdyaWdodCcpLnNsaWNlKDAsIC0yKSk7XG4gICAgY29uc3QgYnRuV2lkdGggPSBOdW1iZXIoJHNlYXJjaEJ0bk5hdkJhci5jc3MoJ3dpZHRoJykuc2xpY2UoMCwgLTIpKTtcblxuICAgIHJldHVybiBuYXZCYXJXaWR0aCAtIG5hdkJhclBhZGRpbmcgLSBidG5SaWdodCAtIGJ0bldpZHRoO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JlYXRlQW5pbWF0aW9uKCkge1xuICAgIGlmIChzZWFyY2hCdG5BbmltYXRpb24pIHtcbiAgICAgIGNhbmNlbEFuaW1hdGUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJHNlYXJjaEJ0bk1lbnVbMF0uYW5pbWF0ZShrZXlGcmFtZSwgYW5pbWF0ZU9wdGlvbnMpO1xuICB9XG4gIGZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XG4gICAgJG5hdkJhci50b2dnbGVDbGFzcyhBQ1RJVkVfQ0xBU1MpO1xuICAgICRtZW51VHJpZ2dlci50b2dnbGVDbGFzcyhBQ1RJVkVfQ0xBU1MpO1xuICB9XG4gIGZ1bmN0aW9uIGhpZGVNZW51KCkge1xuICAgICRuYXZCYXIucmVtb3ZlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbiAgICAkbWVudVRyaWdnZXIucmVtb3ZlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRvU2VhcmNoKCkge1xuICAgIGNvbnNvbGUubG9nKCdTZWFyY2ggaXMgcHJvZ3Jlc3MuLi4uLicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcGF1c2VBbmltYXRlKCkge1xuICAgIHNlYXJjaEJ0bkFuaW1hdGlvbi5wYXVzZSgpO1xuICAgIGlzQWNjb21wbGlzaEFuaW1hdGlvbiA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWxBbmltYXRlKCkge1xuICAgIHNlYXJjaEJ0bkFuaW1hdGlvbi5jYW5jZWwoKTtcbiAgICBpc0FjY29tcGxpc2hBbmltYXRpb24gPSBmYWxzZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXlBbmltYXRlKCkge1xuICAgIHNlYXJjaEJ0bkFuaW1hdGlvbi5wbGF5YmFja1JhdGUgPSAxO1xuICAgIHNlYXJjaEJ0bkFuaW1hdGlvbi5wbGF5KCk7XG4gICAgc3RhdGVPZlNlYXJjaEJ0biA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiByZXZlcnNlQW5pbWF0ZSgpIHtcbiAgICBzZWFyY2hCdG5BbmltYXRpb24ucmV2ZXJzZSgpO1xuICAgIGlzQWNjb21wbGlzaEFuaW1hdGlvbiA9IGZhbHNlO1xuICB9XG59KTtcbiIsIi8vICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbi8vICAgb3dsLm93bENhcm91c2VsKCk7XG4vLyB9KTtcblxuLy8gJCgnLmJsb2ctcG9zdHMgPiAud3JhcHBlciA+IC5hcnRpY2xlLWNvbnRhaW5lci5vd2wtY2Fyb3VzZWwnKS5vd2xDYXJvdXNlbCh7XG4vLyAgIGF1dG9wbGF5OiBmYWxzZSxcbi8vICAgYXV0b3BsYXlUaW1lb3V0OiA2NTAwLFxuLy8gICBhdXRvcGxheVNwZWVkOiAxMDAwLFxuLy8gICBsb29wOiB0cnVlLFxuLy8gICBuYXZUZXh0OiBmYWxzZSxcbi8vICAgbWFyZ2luOiAyNCxcbi8vICAgbmF2OiB0cnVlLFxuLy8gICByZXNwb25zaXZlOiB7XG4vLyAgICAgMDoge1xuLy8gICAgICAgaXRlbXM6IDEsXG4vLyAgICAgfSxcbi8vICAgICAzNjA6IHtcbi8vICAgICAgIGl0ZW1zOiAxLFxuLy8gICAgIH0sXG4vLyAgICAgNzQ0OiB7XG4vLyAgICAgICBpdGVtczogMixcbi8vICAgICB9LFxuLy8gICAgIDExMDA6IHtcbi8vICAgICAgIGl0ZW1zOiA0LFxuLy8gICAgIH0sXG4vLyAgIH0sXG4vLyB9KTtcblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICBjb25zdCAkYWRkaXRpb25hbE9mZmVyc0Nhcm91c2VsID0gJCgnbWFpbiAuYWRkaXRpb25hbC1vZmZlcnMgPiAud3JhcHBlci5vd2wtY2Fyb3VzZWwnKTtcbiAgY29uc3QgJGFydGljbGVDb250YWluZXIgPSAkKCcuYmxvZy1wb3N0cyA+IC53cmFwcGVyID4gLmFydGljbGUtY29udGFpbmVyLm93bC1jYXJvdXNlbCcpO1xuICBjb25zdCBkZWxheVJlY2FsY1Jlc2l6ZSA9IDUwMDtcbiAgbGV0IHRpbWVvdXQ7XG5cbiAgdG9nZ2xlQWRkaXRpb25hbE9mZmVycygpO1xuICBydW5BcnRpY2xlQ29udGFpbmVyKCk7XG5cbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBvbldpbmRvd1Jlc2l6ZSk7XG5cbiAgZnVuY3Rpb24gb25XaW5kb3dSZXNpemUoKSB7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQodG9nZ2xlQWRkaXRpb25hbE9mZmVycywgZGVsYXlSZWNhbGNSZXNpemUpO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9nZ2xlQWRkaXRpb25hbE9mZmVycygpIHtcbiAgICBsZXQgc2NyZWVuV2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblxuICAgIGlmIChzY3JlZW5XaWR0aCA8PSA2NTUpIHtcbiAgICAgIGlmICghJGFkZGl0aW9uYWxPZmZlcnNDYXJvdXNlbC5oYXNDbGFzcygnb3dsLWxvYWRlZCcpKSB7XG4gICAgICAgICRhZGRpdGlvbmFsT2ZmZXJzQ2Fyb3VzZWwub3dsQ2Fyb3VzZWwoe1xuICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcbiAgICAgICAgICBhdXRvcGxheVRpbWVvdXQ6IDY1MDAsXG4gICAgICAgICAgYXV0b3BsYXlTcGVlZDogMTAwMCxcbiAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgIG5hdlRleHQ6IGZhbHNlLFxuICAgICAgICAgIG5hdjogdHJ1ZSxcbiAgICAgICAgICBpdGVtczogMSxcbiAgICAgICAgICBjZW50ZXI6IHRydWUsXG4gICAgICAgICAgYXV0b0hlaWdodDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICgkYWRkaXRpb25hbE9mZmVyc0Nhcm91c2VsLmhhc0NsYXNzKCdvd2wtbG9hZGVkJykpIHtcbiAgICAgICAgJGFkZGl0aW9uYWxPZmZlcnNDYXJvdXNlbC50cmlnZ2VyKCdkZXN0cm95Lm93bC5jYXJvdXNlbCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJ1bkFydGljbGVDb250YWluZXIoKSB7XG4gICAgJGFydGljbGVDb250YWluZXIub3dsQ2Fyb3VzZWwoe1xuICAgICAgYXV0b3BsYXk6IGZhbHNlLFxuICAgICAgYXV0b3BsYXlUaW1lb3V0OiA2NTAwLFxuICAgICAgYXV0b3BsYXlTcGVlZDogMTAwMCxcbiAgICAgIGxvb3A6IHRydWUsXG4gICAgICBuYXZUZXh0OiBmYWxzZSxcbiAgICAgIG1hcmdpbjogMjQsXG4gICAgICBuYXY6IHRydWUsXG4gICAgICByZXNwb25zaXZlOiB7XG4gICAgICAgIDA6IHtcbiAgICAgICAgICBpdGVtczogMSxcbiAgICAgICAgfSxcbiAgICAgICAgNjExOiB7XG4gICAgICAgICAgaXRlbXM6IDIsXG4gICAgICAgIH0sXG4gICAgICAgIDkxMToge1xuICAgICAgICAgIGl0ZW1zOiAzLFxuICAgICAgICB9LFxuICAgICAgICAxMjAxOiB7XG4gICAgICAgICAgaXRlbXM6IDQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59KTtcbiIsImNvbnN0ICRwcmVsb2FkZXJDb250YWluZXIgPSAkKCcucHJlbG9hZC1jb250YWluZXInKTtcbmNvbnN0ICRzdGF0dXNMb2FkaW5nID0gJCgnLnN0YXR1cy1sb2FkaW5nJyk7XG5jb25zdCAkYm9keSA9ICQoJ2JvZHknKTtcbmxldCBwYWRkaW5nQm9keVJpZ2h0O1xubGV0IGRpZmZlcjtcbmNvbnN0IGltZ0NvdW50ID0gJCgnaW1nJykubGVuZ3RoO1xuY29uc3QgcGVyY2VudCA9IE51bWJlcigoMTAwIC8gaW1nQ291bnQpLnRvRml4ZWQoKSk7XG5sZXQgbG9hZGVkQ291bnQgPSAwO1xubGV0IHJlc3VsdCA9IDA7XG5cbmluaXQoKTtcblxuZnVuY3Rpb24gaW5pdCgpIHtcbiAgbG9va1Njcm9sbCgpO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaW1nQ291bnQ7IGkrKykge1xuICAgIGNvbnN0IGNvcHlfaW1nID0gbmV3IEltYWdlKCk7XG4gICAgY29weV9pbWcuc3JjID0gZG9jdW1lbnQuaW1hZ2VzW2ldLnNyYztcblxuICAgICQoY29weV9pbWcpLm9uKCdsb2FkJywgb25Db3B5SW1nTG9hZCk7XG4gICAgJChjb3B5X2ltZykub24oJ2Vycm9yJywgb25Db3B5SW1nTG9hZCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25Db3B5SW1nTG9hZCgpIHtcbiAgcmVzdWx0ICs9IHBlcmNlbnQ7XG4gIGxvYWRlZENvdW50Kys7XG5cbiAgaWYgKHJlc3VsdCA+PSAxMDAgfHwgbG9hZGVkQ291bnQgPT0gaW1nQ291bnQpIHtcbiAgICAkcHJlbG9hZGVyQ29udGFpbmVyLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgdW5Mb29rU2Nyb2xsKCk7XG4gIH0gZWxzZSB7XG4gICAgZmlsbFByb2dyZXNzKCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmlsbFByb2dyZXNzKCkge1xuICAkc3RhdHVzTG9hZGluZy50ZXh0KHJlc3VsdCArICcgJScpO1xufVxuXG5mdW5jdGlvbiBsb29rU2Nyb2xsKCkge1xuICBkaWZmZXIgPSB3aW5kb3cuaW5uZXJXaWR0aCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcblxuICBpZiAoZGlmZmVyKSB7XG4gICAgaWYgKHBhZGRpbmdCb2R5UmlnaHQpIHtcbiAgICAgIGFkZFBhZGRpbmdSaWdodE9mQm9keSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWRkaW5nQm9keVJpZ2h0ID0gTnVtYmVyKCRib2R5LmNzcygncGFkZGluZ1JpZ2h0Jykuc2xpY2UoMCwgMikpO1xuICAgICAgYWRkUGFkZGluZ1JpZ2h0T2ZCb2R5KCk7XG4gICAgfVxuICB9XG4gICRib2R5LmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG5cbiAgZnVuY3Rpb24gYWRkUGFkZGluZ1JpZ2h0T2ZCb2R5KCkge1xuICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucGFkZGluZ1JpZ2h0ID0gU3RyaW5nKHBhZGRpbmdCb2R5UmlnaHQgKyBkaWZmZXIpICsgJ3B4JztcbiAgICBwYWRkaW5nQm9keVJpZ2h0ICs9IGRpZmZlcjtcbiAgfVxufVxuZnVuY3Rpb24gdW5Mb29rU2Nyb2xsKCkge1xuICBpZiAoZGlmZmVyKSB7XG4gICAgcmVtb3ZlUGFkZGluZ1JpZ2h0T2ZCb2R5KCk7XG4gIH1cbiAgJGJvZHkuY3NzKCdvdmVyZmxvdycsICcnKTtcblxuICBmdW5jdGlvbiByZW1vdmVQYWRkaW5nUmlnaHRPZkJvZHkoKSB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSBTdHJpbmcocGFkZGluZ0JvZHlSaWdodCAtIGRpZmZlcikgKyAncHgnO1xuICAgIHBhZGRpbmdCb2R5UmlnaHQgLT0gZGlmZmVyO1xuICB9XG59XG5mdW5jdGlvbiByZW1vdmVQcmVsb2FkZXIoKSB7XG4gIGlmICgkcHJlbG9hZGVyQ29udGFpbmVyKSB7XG4gICAgJHByZWxvYWRlckNvbnRhaW5lci5yZW1vdmUoKTtcbiAgfVxufVxuIiwiJCgoKSA9PiB7XG4gIGNvbnN0ICRtYXJrZXJNaW5QcmljZSA9ICQoXG4gICAgJ21haW4gLmNhdGFsb2cgLndyYXBwZXIgLmxlZnQtc2lkZSAucHJpY2UtY29udGFpbmVyIC5jYXRlZ29yaWVzLWxpc3QgLnByb2dyZXNzLWNvbnRhaW5lciAucHJvZ3Jlc3MtYmFyIC5tYXJrZXIubWluLXByaWNlJ1xuICApO1xuICBjb25zdCAkbWFya2VyTWF4UHJpY2UgPSAkKFxuICAgICdtYWluIC5jYXRhbG9nIC53cmFwcGVyIC5sZWZ0LXNpZGUgLnByaWNlLWNvbnRhaW5lciAuY2F0ZWdvcmllcy1saXN0IC5wcm9ncmVzcy1jb250YWluZXIgLnByb2dyZXNzLWJhciAubWFya2VyLm1heC1wcmljZSdcbiAgKTtcbiAgY29uc3QgJHJhbmdlUHJpY2UgPSAkKFxuICAgICdtYWluIC5jYXRhbG9nIC53cmFwcGVyIC5sZWZ0LXNpZGUgLnByaWNlLWNvbnRhaW5lciAuY2F0ZWdvcmllcy1saXN0IC5wcm9ncmVzcy1jb250YWluZXIgLnByb2dyZXNzLWJhciAucmFuZ2UnXG4gICk7XG4gIGNvbnN0ICRwcmljZUNvbnRlbnQgPSAkKFxuICAgICdtYWluIC5jYXRhbG9nIC53cmFwcGVyIC5sZWZ0LXNpZGUgLnByaWNlLWNvbnRhaW5lciAuY2F0ZWdvcmllcy1saXN0IC5wcmljZSAucHJpY2UtY29udGVudCdcbiAgKTtcbiAgY29uc3QgJGZpbHRlckJ0biA9ICQoJ21haW4gLmNhdGFsb2cgLndyYXBwZXIgLmxlZnQtc2lkZSAucHJpY2UtY29udGFpbmVyIC5jYXRlZ29yaWVzLWxpc3QgLmJ0bicpO1xuICBsZXQgbWluID0gMzk7XG4gIGxldCBtYXggPSAxMjMwO1xuICBjb25zdCBNQVJLRVJfV0lEVEggPSAyNztcbiAgY29uc3QgcmFuZ2UgPSB7IG1pbkNvc3RzOiBudWxsLCBtYXhDb3N0czogbnVsbCB9O1xuXG4gICRtYXJrZXJNaW5QcmljZS5vbignaW5wdXQnLCBvbk1hcmtlclByaWNlSW5wdXQpO1xuICAkbWFya2VyTWF4UHJpY2Uub24oJ2lucHV0Jywgb25NYXJrZXJQcmljZUlucHV0KTtcbiAgJGZpbHRlckJ0bi5vbignY2xpY2snLCBvbkZpbHRlckJ0bkNsaWNrKTtcblxuICBpbml0KCk7XG5cbiAgZnVuY3Rpb24gb25NYXJrZXJQcmljZUlucHV0KCkge1xuICAgIGlmIChOdW1iZXIoJG1hcmtlck1pblByaWNlLnZhbCgpKSAhPT0gbWluKSB7XG4gICAgICBtaW4gPSBOdW1iZXIoJG1hcmtlck1pblByaWNlLnZhbCgpKTtcbiAgICB9XG4gICAgaWYgKE51bWJlcigkbWFya2VyTWF4UHJpY2UudmFsKCkpICE9PSBtYXgpIHtcbiAgICAgIG1heCA9IE51bWJlcigkbWFya2VyTWF4UHJpY2UudmFsKCkpO1xuICAgIH1cblxuICAgIGlmIChtaW4gPiBtYXgpIHtcbiAgICAgIFttaW4sIG1heF0gPSBbbWF4LCBtaW5dO1xuICAgICAgJG1hcmtlck1pblByaWNlLnZhbChtaW4pO1xuICAgICAgJG1hcmtlck1heFByaWNlLnZhbChtYXgpO1xuICAgIH1cbiAgICBjb25zdCBjb250ZW50ID0gY3JhZnRDb250ZW50KG1pbiwgbWF4KTtcblxuICAgIHNldFJhbmdlKCk7XG4gICAgc2V0VGh1bWJzKCk7XG4gICAgZmlsbFByaWNlKGNvbnRlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25GaWx0ZXJCdG5DbGljaygpIHtcbiAgICByYW5nZS5taW5Db3N0cyA9IG1pbjtcbiAgICByYW5nZS5tYXhDb3N0cyA9IG1heDtcblxuICAgIGZpbHRlckJ5Q29zdHMoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgY29uc3QgY29udGVudCA9IGNyYWZ0Q29udGVudChtaW4sIG1heCk7XG5cbiAgICBzZXRSYW5nZSgpO1xuICAgIHNldFRodW1icygpO1xuICAgIGZpbGxQcmljZShjb250ZW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGxQcmljZShjb250ZW50KSB7XG4gICAgJHByaWNlQ29udGVudC50ZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gY3JhZnRDb250ZW50KG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIGAkJHttaW59IC0gJCR7bWF4fWA7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRUaHVtYnMoKSB7XG4gICAgJG1hcmtlck1pblByaWNlLnZhbChtaW4pO1xuICAgICRtYXJrZXJNYXhQcmljZS52YWwobWF4KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldFJhbmdlKCkge1xuICAgIGNvbnN0IG1heEF0dHIgPSBOdW1iZXIoJG1hcmtlck1heFByaWNlLmF0dHIoJ21heCcpKTtcbiAgICBjb25zdCBtaW5BdHRyID0gTnVtYmVyKCRtYXJrZXJNYXhQcmljZS5hdHRyKCdtaW4nKSk7XG5cbiAgICBjb25zdCBtaW5QZXJjZW50ID0gKChtaW4gLSBtaW5BdHRyKSAvIChtYXhBdHRyIC0gbWluQXR0cikpICogMTAwO1xuICAgIGNvbnN0IG1heFBlcmNlbnQgPSAoKG1heCAtIG1pbkF0dHIpIC8gKG1heEF0dHIgLSBtaW5BdHRyKSkgKiAxMDA7XG5cbiAgICBjb25zdCBsZWZ0ID0gbWluUGVyY2VudCArICclJztcbiAgICBjb25zdCB3aWR0aCA9IG1heFBlcmNlbnQgLSBtaW5QZXJjZW50ICsgJyUnO1xuXG4gICAgJHJhbmdlUHJpY2UuY3NzKCdsZWZ0JywgbGVmdCkuY3NzKCd3aWR0aCcsIHdpZHRoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbHRlckJ5Q29zdHMoKSB7XG4gICAgY29uc29sZS5sb2coJ0ZpbHRlcmluZy4uLi4uJywgcmFuZ2UpO1xuICB9XG59KTtcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgJGZpbHRlckJ0biA9ICQoJy5jYXRhbG9nIC5yaWdodC1zaWRlIC5maWx0ZXItYnRuJyk7XG5jb25zdCAkbGVmdFNpZGUgPSAkKCcuY2F0YWxvZyAubGVmdC1zaWRlJyk7XG5jb25zdCAkbG9nSW5CdG4gPSAkKFxuICAnaGVhZGVyIC53cmFwcGVyIC5tZW51LWNvbnRhaW5lciAubG9nLWluLWJ0biwgaGVhZGVyIC53cmFwcGVyIC5uYXZiYXIgLmxvZy1pbi1idG4nXG4pO1xuY29uc3QgJGNsb3NlUmVnaXN0ZXJQYWdlID0gJCgnaGVhZGVyIC5yZWdpc3Rlci1wYWdlIC53cmFwcGVyLXJlZ2lzdGVyIC5jbG9zZS1wYWdlJyk7XG5jb25zdCAkcmVnaXN0ZXJQYWdlID0gJCgnaGVhZGVyIC5yZWdpc3Rlci1wYWdlJyk7XG5jb25zdCAkb3ZlcmxheSA9ICQoJ2hlYWRlciAub3ZlcmxheScpO1xuY29uc3QgQUNUSVZFX0NMQVNTID0gJ2FjdGl2ZSc7XG5cbiRmaWx0ZXJCdG4ub24oJ2NsaWNrJywgb25GaWx0ZXJCdG5DbGljayk7XG4kbG9nSW5CdG4ub24oJ2NsaWNrJywgb25Mb2dJbkJ0bkNsaWNrKTtcbiRvdmVybGF5Lm9uKCdjbGljaycsIG9uT3ZlcmxheUNsaWNrKTtcbiRjbG9zZVJlZ2lzdGVyUGFnZS5vbignY2xpY2snLCBvbk92ZXJsYXlDbGljayk7XG5cbmZ1bmN0aW9uIG9uRmlsdGVyQnRuQ2xpY2soKSB7XG4gICRsZWZ0U2lkZS50b2dnbGVDbGFzcyhBQ1RJVkVfQ0xBU1MpO1xufVxuXG5mdW5jdGlvbiBvbkxvZ0luQnRuQ2xpY2soKSB7XG4gICRvdmVybGF5LmFkZENsYXNzKEFDVElWRV9DTEFTUyk7XG4gICRyZWdpc3RlclBhZ2UuYWRkQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbn1cblxuZnVuY3Rpb24gb25PdmVybGF5Q2xpY2soKSB7XG4gICRvdmVybGF5LnJlbW92ZUNsYXNzKEFDVElWRV9DTEFTUyk7XG4gICRyZWdpc3RlclBhZ2UucmVtb3ZlQ2xhc3MoQUNUSVZFX0NMQVNTKTtcbn1cbiJdfQ==
